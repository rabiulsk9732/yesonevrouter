#!/bin/bash
#
# YESRouter vBNG - Bison-Style Environment Configuration
# /etc/yesrouter/yesrouter.env
#
# Minimal .env file for essential DPDK infrastructure parameters.
# NAT configuration (pools, timeouts, rules) managed via CLI/startup.json
#

#
# Core Configuration
#
MAIN_LCORE=0                        # Main control plane lcore
WORKER_LCORES="1"                   # Worker lcores (RX/NAT processing) - Reduced to 1 for NAT testing
NUMA_NODE=0                         # NUMA socket (must match NIC)

#
# Memory Configuration
#
MEMORY_MB=2048                      # Memory per NUMA socket (MB)
MBUF_COUNT=262144                   # Total mbufs (must be power of 2)
MBUF_CACHE_SIZE=512                 # Per-lcore mbuf cache

#
# Hugepage Configuration
#
HUGEPAGES=2048                      # Number of 2MB hugepages

#
# Port Configuration
#
PORTS="0000:06:13.0 0000:06:14.0"   # PCI addresses (space-separated) WAN LAN
DRIVER="vfio-pci"                   # DPDK driver (vfio-pci, uio_pci_generic)
PORT_MTU=1500                       # MTU for all ports

#
# Queue Configuration (Per-Port)
#
RX_QUEUES=1                         # Number of RX queues per port (reduced for single-worker testing)
TX_QUEUES=1                         # Number of TX queues per port (reduced for single-worker testing)
RX_DESC=2048                        # RX descriptors per queue
TX_DESC=2048                        # TX descriptors per queue
RX_BURST_SIZE=64                    # Packets per RX burst (16, 32, 64, 128)
TX_BURST_SIZE=64                    # Packets per TX burst (16, 32, 64, 128)

#
# RSS Configuration (Flow Steering)
#
RSS_ENABLE=true                     # Enable RSS for multi-queue

#
# Logging Configuration
#
LOG_LEVEL=info                      # Log level (debug, info, warn, error)
